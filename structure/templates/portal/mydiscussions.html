{% extends "portal/base.html" %}
{% block content %}
 
        <!-- main contents -->
        <main id="site__main" class="2xl:ml-[--w-side]  xl:ml-[--w-side-sm] p-2.5 h-[calc(100vh-var(--m-top))] mt-[--m-top]">

            <div class="flex max-lg:flex-col 2xl:gap-12 gap-10 2xl:max-w-[1220px] max-w-[1065px] mx-auto" id="js-oversized">

                <div class="flex-1">
     
                    <div class="max-w-[680px] w-full mx-auto">

                        <div class="page-heading">
                            <h1 class="page-title"> Discussions </h1>
                        </div>
        
                        <!-- groups -->
                        <div class="box p-5">
        
                         
                            
                        </div>
        
                        <!-- tab 2 -->
                        <nav class="mt-8 dark:border-slate-700 mb-6">
                        
                            <ul class="flex gap-2 text-xs text-center text-gray-600 capitalize font-semibold dark:text-white/80" uk-switcher="connect: #tabs2 ; animation: uk-animation-slide-right-medium, uk-animation-slide-left-medium"> 
                            
                                <li> 
                                    <a href="#" class="inline-flex items-center gap-2 py-2.5 px-4 rounded-full aria-expanded:text-white aria-expanded:bg-black"> 
                                        New 
                                    </a> 
                                </li>  
                                <li> 
                                    <a href="#" class="inline-flex items-center gap-2 py-2.5 px-4 rounded-full aria-expanded:text-white aria-expanded:bg-black"> 
                                        Popular 
                                    </a>
                                </li>   
                        
                            </ul> 
        
                        </nav>
                        
                        <div id="tabs2" class="uk-switcher">
        
                            <!-- layouy 1 -->
                            <div>
                <!-- articale list layout -->
                <div class="box p-5 mt-4">
                    {% for discussion in discussions%}

                    <div class="card-list">
                        <a href="blog-read.html" class="lg:order-1">
                            <div class="card-list-media h-100">
                                <img src="/static/main/assets/images/blog/img-2.jpg" alt="">
                            </div>
                        </a>
                        <div class="card-list-body">
                            <a href="blog-read.html"> <h3 class="card-list-title"> {{discussion.title}} </h3> </a>
                            <p class="card-list-text"> {{discussion.content}}</p>
                            <a href="#"> <div class="card-list-link"> username</div> </a>
                            <div class="card-list-info">
                                <div class="flex items-center gap-2"> 
                                    <ion-icon name="heart-outline" class="text-lg"></ion-icon>
                                    {{discussion.views}} views
                                </div>
                                <div class="md:block hidden">Â·</div>
                                <div class="flex items-center gap-2"> 
                                    <ion-icon name="chatbubble-ellipses-outline" class="text-lg"></ion-icon>
                                    {{discussion.likes}}
                                </div>
                            </div>
                        </div>
                    </div>
                  
                    {% for comment in discussion.comments %}

                    <div class="flex items-start gap-3 ">

                    <a href="timeline.html"> <img src="/static/main/assets/images/avatars/avatar-3.jpg" alt="" class="w-6 h-6 mt-1 rounded-full"> </a>
                    <div class="flex-1">
                        <a href="timeline.html" class="text-black font-medium inline-block dark:text-white"> {{comment.user.username}} </a>
                        <p class="mt-0.5">  {{comment.content}} </p>
                      
                    </div>
                </div>
                {%endfor%}
                    <button type="button" class="flex items-center gap-1.5 text-gray-500 hover:text-blue-500 mt-2">
                        <ion-icon name="chevron-down-outline" class="ml-auto duration-200 group-aria-expanded:rotate-180"></ion-icon>
                        More Comments
                    </button>


                <!-- add comment -->
                <div class="sm:px-4 sm:py-3 p-2.5 border-t border-gray-100 flex items-center gap-1 dark:border-slate-700/40">
                    
                    
                    <div class="flex-1 relative overflow-hidden h-10">
                        <form action="{{ url_for('core.add_discussion_comment', discussion_id=discussion.id) }}" method="post">

                        <textarea name="content" placeholder="Add Comment...." rows="1" class="w-full resize-none !bg-transparent px-4 py-2 focus:!border-transparent focus:!ring-transparent"></textarea>

                  
                        

                    </div>
                    

                    <button type="submit" class="text-sm rounded-full py-1.5 px-3.5 bg-secondery"> Comment</button>
                </div> 
            </form>
                    <hr class="card-list-divider">
                    {%endfor%}
                </div>
        
                <!-- show more -->
                <div class="flex justify-center my-6">
                    <button type="button" class="bg-white py-2 px-5 rounded-full shadow-md font-semibold text-sm dark:bg-dark2">Load more...</button>
                </div>

            </div>

        </div>

    </div>


</div> 

<!-- sidebar -->

         <div class="2xl:w-[380px] lg:w-[330px] w-full">

            <div class="lg:space-y-6 space-y-4 lg:pb-8 max-lg:grid sm:grid-cols-2 max-lg:gap-6" uk-sticky="media: 1024; end: #js-oversized; offset: 80">
        
                <div class="box p-5 px-6">
        
                    <div class="flex items-baseline justify-between text-black dark:text-white">
                        <h3 class="font-bold text-base"> Popular Issues</h3>
                        <a href="#" class="text-sm text-blue-500">See all Issues</a>
                    </div>
                
                    <div class="side-list">
                        {% for issue in issues[:5]%}
                        <div class="side-list-item">
                            <a href="{{url_for('core.issue', issue_id=issue.id)}}">
                                <img src="/static/main/assets/images/avatars/avatar-2.jpg" alt="" class="side-list-image rounded-md">
                            </a>
                            <div class="flex-1">
                                <a href="{{url_for('core.issue', issue_id=issue.id)}}"><h4 class="side-list-title"> {{issue.title}}</h4></a>
                                <div class="side-list-info"> {{issue.views}} </div>
                            </div>
                            <a href="{{url_for('core.issue', issue_id=issue.id)}}"  class="button bg-secondery">View</a>
                        </div>
                        {%endfor%}
                         
                         
                    </div>
                    <button class="bg-secondery w-full text-black py-1.5 font-medium px-3.5 rounded-md text-sm mt-3 dark:text-white">See all</button>
        
                </div>
        
                 <!-- Groups You Manage  -->
                 <div class="bg-white rounded-xl shadow p-5 px-6 border1 dark:bg-dark2">
                                
                    <div class="flex items-baseline justify-between text-black dark:text-white">
                        <h3 class="font-bold text-base"> Popular Polls </h3>
                        <a href="#" class="text-sm text-blue-500">See all</a>
                    </div>
        
                    <div class="side-list">
                        {% for poll in polls[:5]%}
                        <div class="side-list-item">
                            <a href="timeline-group.html">
                                <img src="assets/images/avatars/avatar-2.jpg" alt="" class="side-list-image rounded-md">
                            </a>
                            <div class="flex-1">
                                <a href="timeline-group.html"><h4 class="side-list-title">  {{poll.question}}</h4></a>
                                <div class="side-list-info"> </div>
                            </div>
                            <button class="button bg-primary-soft text-primary dark:text-white">Like</button>
                        </div>
                        {%endfor%}
                         
                         
                    </div>
        
                    <a href="{{url_for('core.polls')}}"  class="bg-secondery w-full text-black py-1.5 font-medium px-3.5 rounded-md text-sm mt-3 dark:text-white">See all</a>
        
                </div>
        
                <!-- Groups You Manage  -->
                <div class="bg-white rounded-xl shadow p-5 px-6 border1 dark:bg-dark2">
                                
                    <div class="flex items-baseline justify-between text-black dark:text-white">
                        <h3 class="font-bold text-base"> Suggested Discussions </h3>
                        <a href="#" class="text-sm text-blue-500">See all</a>
                    </div>
        
                    <div class="side-list">
                        {%for discussion in discussions[:5]%}
                    <div class="side-list-item">
                        <a href="timeline-group.html">
                            <img src="/static/main/assets/images/avatars/avatar-2.jpg" alt="" class="side-list-image rounded-md">
                        </a>
                        <div class="flex-1">
                            <a  href="{{url_for('core.view_discussion', discussion_id=discussion.id)}}" ><h4 class="side-list-title">  {{discussion.title}}</h4></a>
                            <div class="side-list-info"> {{discussion.views}} views </div>
                        </div>
                        <button class="button bg-primary text-white">{{discussion.likes}} likes</button>
                    </div>
                    {%endfor%}
                
                   
                     
                </div>
                
        
                    <a href="{{url_for('core.discussions')}}"  class="bg-secondery w-full text-black py-1.5 font-medium px-3.5 rounded-md text-sm mt-3 dark:text-white">See all</a>
        
                </div>
        
            </div> 
        
        </div>


</main>

</div>




<div class="w-3.5 h-3.5 absolute -bottom-2 right-5 bg-white rotate-45 dark:bg-dark3"></div>
</div>
</div>

    {% endblock %}